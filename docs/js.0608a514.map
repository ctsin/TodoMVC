{"version":3,"sources":["js\\store.ts","js\\model.ts","js\\template.ts","js\\helpers.ts","js\\constants.ts","js\\view.ts","js\\controller.ts","js\\app.ts","js\\index.ts","..\\node_modules\\parcel-bundler\\src\\builtins\\bundle-url.js","..\\node_modules\\parcel-bundler\\src\\builtins\\css-loader.js"],"names":["bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","match","getBaseURL","url","replace","exports","bundle","require","updateLink","link","newLink","cloneNode","onload","remove","href","split","Date","now","parentNode","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","document","querySelectorAll","i","length","module"],"mappings":"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","file":"js.0608a514.map","sourceRoot":"..\\src","sourcesContent":["import { Todo } from \"./interface\";\r\n\r\nexport default class Store {\r\n  constructor(private name: string = \"todomvc-typescript\") {\r\n    localStorage[name] = localStorage[name] || JSON.stringify({ todos: [] });\r\n  }\r\n\r\n  save(todo: Todo, callback = () => void 0) {\r\n    const data = JSON.parse(localStorage[this.name]);\r\n    const todos: Todo[] = data.todos;\r\n    const { id } = todo;\r\n\r\n    if (id) {\r\n      for (let i = 0, length = todos.length; i < length; i++) {\r\n        if (todos[i].id === id) {\r\n          for (let key in todo) {\r\n            todos[i][key] = todo[key];\r\n          }\r\n          break;\r\n        }\r\n      }\r\n\r\n      localStorage[this.name] = JSON.stringify(data);\r\n\r\n      callback();\r\n    } else {\r\n      todo.id = Date.now();\r\n      todos.push(todo);\r\n      localStorage[this.name] = JSON.stringify(data);\r\n\r\n      callback();\r\n    }\r\n  }\r\n\r\n  find(query, callback: (todos: Todo[]) => void) {\r\n    if (!callback) return;\r\n\r\n    const todos: Todo[] = JSON.parse(localStorage[this.name]).todos;\r\n\r\n    const filter = todos.filter(todo => {\r\n      for (const q in query) {\r\n        if (query[q] !== todo[q]) return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n\r\n    callback(filter);\r\n  }\r\n\r\n  all(callback: (todos: Todo[]) => void) {\r\n    if (!callback) return;\r\n\r\n    const todos: Todo[] = JSON.parse(localStorage[this.name]).todos;\r\n\r\n    callback(todos);\r\n  }\r\n\r\n  remove(id, callback: () => void) {\r\n    const data = JSON.parse(localStorage[this.name]);\r\n    const todos: Todo[] = data.todos;\r\n\r\n    for (let i = 0, length = todos.length; i < length; i++) {\r\n      if (todos[i].id === id) {\r\n        todos.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n\r\n    localStorage[this.name] = JSON.stringify(data);\r\n\r\n    callback();\r\n  }\r\n}\r\n","import Store from \"./store\";\r\nimport { Todo, TodosCount } from \"./interface\";\r\n\r\nexport default class Model {\r\n  constructor(private store: Store) {}\r\n\r\n  create(title: string, callback: () => void) {\r\n    const newTodo: Todo = {\r\n      title,\r\n      completed: false\r\n    };\r\n\r\n    this.store.save(newTodo, callback);\r\n  }\r\n\r\n  read(query, callback?) {\r\n    const queryType = typeof query;\r\n\r\n    switch (queryType) {\r\n      case \"function\":\r\n        callback = query;\r\n        this.store.all(callback);\r\n        break;\r\n\r\n      case \"string\":\r\n      case \"number\":\r\n        query = parseInt(query, 10);\r\n        this.store.find({ id: query }, callback);\r\n        break;\r\n\r\n      default:\r\n        this.store.find(query, callback);\r\n    }\r\n  }\r\n\r\n  update(todoToggled: Todo, callback) {\r\n    this.store.save(todoToggled, callback);\r\n  }\r\n\r\n  delete(id: number, callback: () => void) {\r\n    this.store.remove(id, callback);\r\n  }\r\n\r\n  getCount(callback: (todosCount: TodosCount) => void) {\r\n    const todosCount: TodosCount = {\r\n      active: 0,\r\n      completed: 0,\r\n      total: 0\r\n    };\r\n\r\n    this.store.all(data => {\r\n      data.forEach(todo => {\r\n        todo.completed ? todosCount.completed++ : todosCount.active++;\r\n        todosCount.total++;\r\n      });\r\n    });\r\n\r\n    callback(todosCount);\r\n  }\r\n}\r\n","import { Todo } from \"./interface\";\r\n\r\nexport default class Template {\r\n  show(todos: Todo[]): string {\r\n    return todos\r\n      .map(todo => {\r\n        const { id, title, completed } = todo;\r\n\r\n        return `\r\n          <li data-id=\"${id}\" ${completed ? `class=\"completed\"` : ``}>\r\n            <div class=\"view\">\r\n              <input \r\n                class=\"toggle\" \r\n                type=\"checkbox\" \r\n                autocompleted=\"off\" \r\n                ${completed ? `checked` : ``}\r\n              >\r\n              <label>${title}</label>\r\n              <button class=\"destroy\"></button>\r\n            </div>\r\n          </li>\r\n        `;\r\n      })\r\n      .join(\"\");\r\n  }\r\n\r\n  todoCounter(active) {\r\n    const plural = active < 2 ? \"\" : \"s\";\r\n\r\n    return `\r\n      <strong>${active}</strong> item${plural} left\r\n    `;\r\n  }\r\n}\r\n","export const $ = (selector, scope = document) => scope.querySelector(selector);\r\n\r\nexport const $parent = (element, tagName) => {\r\n  if (!element.parentNode) return;\r\n\r\n  if (element.parentNode.tagName.toLowerCase() === tagName.toLowerCase()) {\r\n    return element.parentNode;\r\n  }\r\n\r\n  return $parent(element.parentNode, tagName);\r\n};\r\n\r\nexport const $on = (\r\n  element,\r\n  event,\r\n  fn,\r\n  options: { target?: string; capture?: boolean } = {}\r\n) => {\r\n  const delegatorFn = e =>\r\n    e.target.matches(options.target) && fn.call(e.target, e);\r\n\r\n  element.addEventListener(\r\n    event,\r\n    options.target ? delegatorFn : fn,\r\n    options.capture || false\r\n  );\r\n\r\n  if (options.target) return delegatorFn;\r\n};\r\n","// 按键映射\r\nexport const ENTER_KEY = 13;\r\nexport const ESCAPE_KEY = 27;\r\n\r\n// 视图渲染\r\nexport enum Render {\r\n  ShowEntries,\r\n  RemoveTodo,\r\n  EditTodos,\r\n  EditTodosDone,\r\n  UpdateElementCount,\r\n  ClearCompletedButton,\r\n  CountentBlockVisibility,\r\n  ToggleAll,\r\n  CompleteTodo,\r\n  ClearNewTodo,\r\n  SetFilter\r\n}\r\n","import Template from \"./template\";\r\nimport { $, $parent, $on } from \"./helpers\";\r\nimport { Render, ENTER_KEY, ESCAPE_KEY } from \"./constants\";\r\nimport { Todo } from \"./interface\";\r\n\r\nexport default class View {\r\n  private $new;\r\n  private $list;\r\n  private $counter;\r\n  private $clearCompleted;\r\n  private $main;\r\n  private $footer;\r\n  private $toggleAll;\r\n\r\n  constructor(private template: Template) {\r\n    this.$new = $(\".new-todo\");\r\n    this.$list = $(\".todo-list\");\r\n    this.$counter = $(\".todo-count\");\r\n    this.$clearCompleted = $(\".clear-completed\");\r\n    this.$main = $(\".main\");\r\n    this.$footer = $(\".footer\");\r\n    this.$toggleAll = $(\".toggle-all\");\r\n  }\r\n\r\n  private getItemId(element) {\r\n    const li = $parent(element, \"li\");\r\n    return parseInt(li.dataset.id, 10);\r\n  }\r\n\r\n  // 监听事件：新增条目\r\n  onAddTodo(handler: (title: string) => void) {\r\n    $on(this.$new, \"change\", () => {\r\n      handler(this.$new.value);\r\n    });\r\n  }\r\n\r\n  // 监听事件：移除条目\r\n  onRemoveTodo(handler: (id: number) => void) {\r\n    $on(\r\n      this.$list,\r\n      \"click\",\r\n      event => {\r\n        const id = this.getItemId(event.target);\r\n        handler(id);\r\n      },\r\n      { target: \".destroy\" }\r\n    );\r\n  }\r\n\r\n  // 监听事件：切换条目完成与否\r\n  onToggleTodo(handler: (todo: Todo) => void) {\r\n    $on(\r\n      this.$list,\r\n      \"change\",\r\n      event => {\r\n        const id = this.getItemId(event.target);\r\n        const completed = event.target.checked;\r\n        handler({ id, completed });\r\n      },\r\n      { target: \".toggle\" }\r\n    );\r\n  }\r\n\r\n  // 监听事件：切换全部条目的完成与否\r\n  onToggleAllTodo(handler: (status: boolean) => void) {\r\n    $on(this.$toggleAll, \"change\", event => {\r\n      handler(event.target.checked);\r\n    });\r\n  }\r\n\r\n  // 监听事件：编辑条目\r\n  onEditTodo(handler: (id: number) => void) {\r\n    $on(\r\n      this.$list,\r\n      \"dblclick\",\r\n      event => {\r\n        const id = this.getItemId(event.target);\r\n        handler(id);\r\n      },\r\n      { target: \"li label\" }\r\n    );\r\n  }\r\n\r\n  // 监听事件：完成条目编辑\r\n  onEditTodoDone(handler: (todo: Todo) => void) {\r\n    $on(\r\n      this.$list,\r\n      \"blur\",\r\n      event => {\r\n        if (!event.target.dataset.iscanceled) {\r\n          const id = this.getItemId(event.target);\r\n          const title = event.target.value;\r\n          handler({ id, title });\r\n        }\r\n      },\r\n      { target: \"li .edit\", capture: true }\r\n    );\r\n\r\n    $on(\r\n      this.$list,\r\n      \"keypress\",\r\n      event => {\r\n        event.keyCode === ENTER_KEY && event.target.blur();\r\n      },\r\n      { target: \"li .edit\" }\r\n    );\r\n  }\r\n\r\n  // 监听事件：放弃条目编辑\r\n  onEditTodoCancel(handler: (id: number) => void) {\r\n    $on(\r\n      this.$list,\r\n      \"keyup\",\r\n      event => {\r\n        if (event.keyCode === ESCAPE_KEY) {\r\n          event.target.dataset.iscanceled = true;\r\n          event.target.blur();\r\n\r\n          const id = this.getItemId(event.target);\r\n          handler(id);\r\n        }\r\n      },\r\n      { target: \"li .edit\" }\r\n    );\r\n  }\r\n\r\n  // 监听事件：删除所有完成条目\r\n  onRemoveCompleted(handler) {\r\n    $on(this.$clearCompleted, \"click\", () => {\r\n      handler();\r\n    });\r\n  }\r\n\r\n  // 监听事件：页面载入完成\r\n  onLoad(handler) {\r\n    $on(window, \"load\", () => {\r\n      handler(document.location.hash);\r\n    });\r\n  }\r\n\r\n  // 监听事件：路由改变\r\n  onHashChange(handler) {\r\n    $on(window, \"hashchange\", () => {\r\n      handler(document.location.hash);\r\n    });\r\n  }\r\n\r\n  // 渲染页面\r\n  render(command, parameter?) {\r\n    this[command](parameter);\r\n  }\r\n\r\n  // 渲染：清理输入框\r\n  private [Render.ClearNewTodo]() {\r\n    this.$new.value = \"\";\r\n  }\r\n\r\n  // 渲染：列表视图可见性\r\n  private [Render.CountentBlockVisibility](visible: boolean) {\r\n    this.$main.hidden = this.$footer.hidden = !visible;\r\n  }\r\n\r\n  // 渲染：“清除所有完成项”按钮可见性\r\n  private [Render.ClearCompletedButton](visible: boolean) {\r\n    this.$clearCompleted.hidden = !visible;\r\n  }\r\n\r\n  // 渲染：同步“选择全部”表单项\r\n  private [Render.ToggleAll](allChecked: boolean) {\r\n    this.$toggleAll.checked = allChecked;\r\n  }\r\n\r\n  // 渲染：列表\r\n  private [Render.ShowEntries](todos) {\r\n    this.$list.innerHTML = this.template.show(todos);\r\n  }\r\n\r\n  // 渲染：底部过滤器\r\n  private [Render.SetFilter](currentPage) {\r\n    $(\".filters .selected\").classList.remove(\"selected\");\r\n    $(`.filters [href=\"#/${currentPage}\"]`).classList.add(\"selected\");\r\n  }\r\n\r\n  // 渲染：底部计数\r\n  private [Render.UpdateElementCount](active: number) {\r\n    this.$counter.innerHTML = this.template.todoCounter(active);\r\n  }\r\n\r\n  // 渲染：移除一条\r\n  private [Render.RemoveTodo](id: number) {\r\n    const el = $(`[data-id=\"${id}\"]`);\r\n\r\n    el && this.$list.removeChild(el);\r\n  }\r\n\r\n  // 渲染：切换完成状态\r\n  private [Render.CompleteTodo](toggleTodo: Todo) {\r\n    const { id, completed } = toggleTodo;\r\n\r\n    const todo = $(`[data-id=\"${id}\"]`);\r\n\r\n    /**\r\n     * 当在 'Active' 和 'Completed' 路由时，点击 'toggleAll'.\r\n     * 因强制不刷新 filter，DOM还未就绪，所有这里直接返回，等待最后一并刷新。\r\n     */\r\n    if (!todo) return;\r\n\r\n    todo.classList.toggle(\"completed\", completed);\r\n\r\n    $(\"input\", todo).checked = completed;\r\n  }\r\n\r\n  // 渲染：编辑条目\r\n  private [Render.EditTodos](todo: Todo) {\r\n    const { id, title } = todo;\r\n    const editing = $(`[data-id=\"${id}\"]`);\r\n\r\n    editing.classList.add(\"editing\");\r\n\r\n    const input = document.createElement(\"input\");\r\n    input.className = \"edit\";\r\n\r\n    editing.appendChild(input);\r\n    input.focus();\r\n    input.value = title;\r\n  }\r\n\r\n  // 渲染：完成编辑条目\r\n  private [Render.EditTodosDone](todo: Todo) {\r\n    const { id, title } = todo;\r\n    const editing = $(`[data-id=\"${id}\"]`);\r\n    const input = $(\".edit\", editing);\r\n\r\n    editing.removeChild(input);\r\n    editing.classList.remove(\"editing\");\r\n\r\n    $(\"label\", editing).textContent = title;\r\n  }\r\n}\r\n","import Model from \"./model\";\r\nimport View from \"./view\";\r\nimport { Render } from \"./constants\";\r\nimport { Todo, TodosCount } from \"./interface\";\r\n\r\nexport default class Controller {\r\n  private activeRoute: string;\r\n  private lastActiveRoute: string;\r\n\r\n  constructor(private model: Model, private view: View) {\r\n    this.activeRoute = \"\";\r\n    this.lastActiveRoute = \"\";\r\n\r\n    this.on();\r\n  }\r\n\r\n  // 监听 DOM 事件\r\n  private on() {\r\n    this.view.onAddTodo(title => {\r\n      this.addTodo(title);\r\n    });\r\n\r\n    this.view.onRemoveTodo(id => {\r\n      this.removeTodo(id);\r\n    });\r\n\r\n    this.view.onToggleTodo(todoToggled => {\r\n      this.toggleTodo(todoToggled);\r\n    });\r\n\r\n    this.view.onToggleAllTodo(status => {\r\n      this.toggleAllTodo(status);\r\n    });\r\n\r\n    this.view.onEditTodo(id => {\r\n      this.editTodo(id);\r\n    });\r\n\r\n    this.view.onEditTodoDone((todo: Todo) => {\r\n      this.editTodoDone(todo);\r\n    });\r\n\r\n    this.view.onEditTodoCancel(id => {\r\n      this.editTodoCancel(id);\r\n    });\r\n\r\n    this.view.onRemoveCompleted(() => {\r\n      this.removeCompleted();\r\n    });\r\n\r\n    this.view.onHashChange(hash => {\r\n      this.setView(hash);\r\n    });\r\n\r\n    this.view.onLoad(hash => {\r\n      this.setView(hash);\r\n    });\r\n  }\r\n\r\n  private addTodo(title: string) {\r\n    if (title.trim() === \"\") return;\r\n\r\n    this.model.create(title, () => {\r\n      this.view.render(Render.ClearNewTodo);\r\n\r\n      this.filter(true);\r\n    });\r\n  }\r\n\r\n  private removeTodo(id: number) {\r\n    this.model.delete(id, () => {\r\n      this.view.render(Render.RemoveTodo, id);\r\n    });\r\n\r\n    this.filter();\r\n  }\r\n\r\n  private toggleTodo(todoToggled: Todo, silent = false) {\r\n    this.model.update(todoToggled, () => {\r\n      this.view.render(Render.CompleteTodo, todoToggled);\r\n    });\r\n\r\n    !silent && this.filter();\r\n  }\r\n\r\n  private toggleAllTodo(completed: boolean) {\r\n    this.model.read({ completed: !completed }, (todos: Todo[]) => {\r\n      todos.forEach(todo => {\r\n        const { id, completed } = todo;\r\n\r\n        this.toggleTodo({ id, completed: !completed }, true);\r\n      });\r\n    });\r\n\r\n    this.filter();\r\n  }\r\n\r\n  private editTodo(id) {\r\n    this.model.read(id, (todo: Todo[]) => {\r\n      const title = todo[0].title;\r\n\r\n      this.view.render(Render.EditTodos, { id, title });\r\n    });\r\n  }\r\n\r\n  private editTodoDone(todo: Todo) {\r\n    let { id, title } = todo;\r\n\r\n    title = title.trim();\r\n\r\n    if (title.length !== 0) {\r\n      this.model.update({ id, title }, () => {\r\n        this.view.render(Render.EditTodosDone, { id, title });\r\n      });\r\n    } else {\r\n    }\r\n  }\r\n\r\n  private editTodoCancel(id: number) {\r\n    this.model.read(id, (todo: Todo) => {\r\n      const title = todo[0].title;\r\n\r\n      this.view.render(Render.EditTodosDone, { id, title });\r\n    });\r\n  }\r\n\r\n  private removeCompleted() {\r\n    this.model.read({ completed: true }, (todos: Todo[]) => {\r\n      todos.forEach(todo => {\r\n        const { id } = todo;\r\n\r\n        this.removeTodo(id);\r\n      });\r\n    });\r\n\r\n    this.filter();\r\n  }\r\n\r\n  private setView(locationHash: string) {\r\n    const route = locationHash.split(\"/\")[1];\r\n    const page = route || \"\";\r\n\r\n    this.updateFilterState(page);\r\n  }\r\n\r\n  private updateFilterState(currentPage) {\r\n    this.activeRoute = currentPage;\r\n\r\n    this.activeRoute = this.activeRoute || \"All\";\r\n\r\n    this.filter();\r\n\r\n    this.view.render(Render.SetFilter, currentPage);\r\n  }\r\n\r\n  private filter(force = false) {\r\n    const activeRoute =\r\n      this.activeRoute.charAt(0).toUpperCase() + this.activeRoute.substr(1);\r\n\r\n    this.updateCount();\r\n\r\n    if (\r\n      force ||\r\n      this.lastActiveRoute !== \"All\" ||\r\n      this.lastActiveRoute !== activeRoute\r\n    ) {\r\n      this[`show${activeRoute}`]();\r\n    }\r\n\r\n    this.lastActiveRoute = activeRoute;\r\n  }\r\n\r\n  private updateCount() {\r\n    this.model.getCount((todosCount: TodosCount) => {\r\n      const { active, completed, total } = todosCount;\r\n\r\n      this.view.render(Render.UpdateElementCount, active);\r\n      this.view.render(Render.ClearCompletedButton, completed > 0);\r\n      this.view.render(Render.ToggleAll, completed === total);\r\n      this.view.render(Render.CountentBlockVisibility, total > 0);\r\n    });\r\n  }\r\n\r\n  private showAll() {\r\n    this.model.read(data => {\r\n      this.view.render(Render.ShowEntries, data);\r\n    });\r\n  }\r\n\r\n  private showActive() {\r\n    this.model.read({ completed: false }, data => {\r\n      this.view.render(Render.ShowEntries, data);\r\n    });\r\n  }\r\n\r\n  private showCompleted() {\r\n    this.model.read({ completed: true }, data => {\r\n      this.view.render(Render.ShowEntries, data);\r\n    });\r\n  }\r\n}\r\n","import Store from \"./store\";\r\nimport Model from \"./model\";\r\nimport Template from \"./template\";\r\nimport View from \"./view\";\r\nimport Controller from \"./controller\";\r\n\r\nexport default class TodoApp {\r\n  private store: Store;\r\n  private model: Model;\r\n  private template: Template;\r\n  private view: View;\r\n  controller: Controller;\r\n\r\n  constructor(private name: string) {\r\n    this.store = new Store(this.name);\r\n    this.model = new Model(this.store);\r\n    this.template = new Template();\r\n    this.view = new View(this.template);\r\n    this.controller = new Controller(this.model, this.view);\r\n  }\r\n}\r\n","import \"todomvc-app-css\";\r\nimport TodoApp from \"./app\";\r\n\r\nconst todo = new TodoApp(\"todomvc-typescript\");\r\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}